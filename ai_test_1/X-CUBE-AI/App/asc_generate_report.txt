Neural Network Tools for STM32AI v1.6.0 (STM.ai v7.3.0-RC5)
Created date          : 2022-11-30 11:37:14
Parameters            : generate --name asc -m /home/felipe/Téléchargements/en.fp-ai-sensing1/STM32CubeFunctionPack_SENSING1_V4.0.3/Utilities/AI_Ressources/models/Session_keras_mod_93_Model.h5 --type keras --compression medium --verbosity 1 --workspace /tmp/mxAI_workspace6240781632330314650159202816491469 --output /home/felipe/.stm32cubemx/asc_output --allocate-inputs --allocate-outputs

Exec/report summary (generate)
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
model file         :   /home/felipe/Téléchargements/en.fp-ai-sensing1/STM32CubeFunctionPack_SENSING1_V4.0.3/Utilities/AI_Ressources/models/Session_keras_mod_93_Model.h5
type               :   keras                                                                                                                                            
c_name             :   asc                                                                                                                                              
compression        :   medium                                                                                                                                           
options            :   allocate-inputs, allocate-outputs                                                                                                                
optimization       :   balanced                                                                                                                                         
target/series      :   generic                                                                                                                                          
workspace dir      :   /tmp/mxAI_workspace6240781632330314650159202816491469                                                                                            
output dir         :   /home/felipe/.stm32cubemx/asc_output                                                                                                             
model_fmt          :   float                                                                                                                                            
model_name         :   Session_keras_mod_93_Model                                                                                                                       
model_hash         :   d218804885b53a78dd45a77bdbee9121                                                                                                                 
params #           :   7,703 items (30.09 KiB)                                                                                                                          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
input 1/1          :   'input_0' (domain:activations/**default**)                                                                                                       
                   :   960 items, 3.75 KiB, ai_float, float, (1,30,32,1)                                                                                                
output 1/1         :   'dense_12' (domain:activations/**default**)                                                                                                      
                   :   3 items, 12 B, ai_float, float, (1,1,1,3)                                                                                                        
macc               :   517,373                                                                                                                                          
weights (ro)       :   12,732 B (12.43 KiB) (1 segment) / -18,080(-58.7%) vs float model                                                                                
activations (rw)   :   19,328 B (18.88 KiB) (1 segment) *                                                                                                               
ram (total)        :   19,328 B (18.88 KiB) = 19,328 + 0 + 0                                                                                                            
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
(*) 'input'/'output' buffers can be used from the activations buffer

Model name - Session_keras_mod_93_Model ['input_0'] ['dense_12']
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type,original)                   oshape                    param/size     macc      connected to       |   c_size            c_macc                c_type                     
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
0    input_0 (Input, None)                   [b:None,h:30,w:32,c:1]                                                |                                          
     conv2d_11_conv2d (Conv2D, Conv2D)       [b:None,h:28,w:30,c:16]   160/640        120,976   input_0            |   -640(-100.0%)     -120,976(-100.0%)    
     conv2d_11 (Nonlinearity, Conv2D)        [b:None,h:28,w:30,c:16]                  13,440    conv2d_11_conv2d   |                     -13,440(-100.0%)     
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1    max_pooling2d_11 (Pool, MaxPooling2D)   [b:None,h:14,w:15,c:16]                  13,440    conv2d_11          |   +640(+100.0%)     +134,416(+1000.1%)    optimized_conv2d_of32[0]   
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
3    conv2d_12_conv2d (Conv2D, Conv2D)       [b:None,h:12,w:13,c:16]   2,320/9,280    359,440   max_pooling2d_11   |   -9,280(-100.0%)   -359,440(-100.0%)    
     conv2d_12 (Nonlinearity, Conv2D)        [b:None,h:12,w:13,c:16]                  2,496     conv2d_12_conv2d   |                     -2,496(-100.0%)      
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
4    max_pooling2d_12 (Pool, MaxPooling2D)   [b:None,h:6,w:6,c:16]                    2,304     conv2d_12          |   +9,280(+100.0%)   +361,936(+15709.0%)   optimized_conv2d_of32[1]   
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
6    flatten_6 (Reshape, Flatten)            [b:None,c:576]                                     max_pooling2d_12   |                                          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
7    dense_11_dense (Dense, Dense)           [b:None,c:9]              5,193/20,772   5,193     flatten_6          |   -18,080(-87.0%)   +9(+0.2%)             dense_wc4of32/nl_of32[2, 3]
     dense_11 (Nonlinearity, Dense)          [b:None,c:9]                             9         dense_11_dense     |                     -9(-100.0%)          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
9    dense_12_dense (Dense, Dense)           [b:None,c:3]              30/120         30        dense_11           |                     +45(+150.0%)          dense_of32/nl_of32[o][4, 5]
     dense_12 (Nonlinearity, Dense)          [b:None,c:3]                             45        dense_12_dense     |                     -45(-100.0%)         
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=517,373/517,373  weights=30,812/12,732 -18,080(-58.7%) activations=--/19,328 io=--/0



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : session_keras_mod_93_model
c-name                : asc
c-node #              : 6
c-array #             : 17
activations size      : 19328 (1 segment)
weights size          : 12732 (1 segment)
macc                  : 517373
inputs                : ['input_0_output']
outputs               : ['dense_12_output']

C-Arrays (17)
------------------------------------------------------------------------------------------------------------
c_id   name (*_array)              item/size    domain/mem-pool           c-type        fmt         comment
------------------------------------------------------------------------------------------------------------
0      dense_11_output             9/36         activations/**default**   float         float32            
1      dense_11_dense_weights      5184/2656    weights/weights           const float   c4 (LUT4)          
2      dense_12_dense_output       3/12         activations/**default**   float         float32            
3      dense_12_output             3/12         activations/**default**   float         float32     /output
4      dense_11_dense_bias         9/36         weights/weights           const float   float32            
5      dense_12_dense_weights      27/108       weights/weights           const float   float32            
6      dense_12_dense_bias         3/12         weights/weights           const float   float32            
7      conv2d_11_conv2d_weights    144/576      weights/weights           const float   float32            
8      conv2d_11_conv2d_scratch0   960/3840     activations/**default**   float         float32            
9      conv2d_11_conv2d_bias       16/64        weights/weights           const float   float32            
10     conv2d_12_conv2d_scratch0   416/1664     activations/**default**   float         float32            
11     conv2d_12_conv2d_weights    2304/9216    weights/weights           const float   float32            
12     input_0_output              960/3840     activations/**default**   float         float32     /input 
13     conv2d_11_conv2d_output     3360/13440   activations/**default**   float         float32            
14     conv2d_12_conv2d_bias       16/64        weights/weights           const float   float32            
15     conv2d_12_conv2d_output     576/2304     activations/**default**   float         float32            
16     dense_11_dense_output       9/36         activations/**default**   float         float32            
------------------------------------------------------------------------------------------------------------

C-Layers (6)
--------------------------------------------------------------------------------------------------------------------
c_id   name (*_layer)     id   layer_type          macc     rom    tensors                        shape (array id) 
--------------------------------------------------------------------------------------------------------------------
0      conv2d_11_conv2d   1    optimized_conv2d    147856   640    I: input_0_output              (1,30,32,1) (12) 
                                                                   S: conv2d_11_conv2d_scratch0                    
                                                                   W: conv2d_11_conv2d_weights    (1,16,3,3) (7)   
                                                                   W: conv2d_11_conv2d_bias       (1,1,1,16) (9)   
                                                                   O: conv2d_11_conv2d_output     (1,14,15,16) (13)
--------------------------------------------------------------------------------------------------------------------
1      conv2d_12_conv2d   4    optimized_conv2d    364240   9280   I: conv2d_11_conv2d_output     (1,14,15,16) (13)
                                                                   S: conv2d_12_conv2d_scratch0                    
                                                                   W: conv2d_12_conv2d_weights    (16,16,3,3) (11) 
                                                                   W: conv2d_12_conv2d_bias       (1,1,1,16) (14)  
                                                                   O: conv2d_12_conv2d_output     (1,6,6,16) (15)  
--------------------------------------------------------------------------------------------------------------------
2      dense_11_dense     7    dense               5193     2692   I: conv2d_12_conv2d_output0    (1,1,1,576) (15) 
                                                                   W: dense_11_dense_weights      (576,1,1,9) (1)  
                                                                   W: dense_11_dense_bias         (1,1,1,9) (4)    
                                                                   O: dense_11_dense_output       (1,1,1,9) (16)   
--------------------------------------------------------------------------------------------------------------------
3      dense_11           7    nl                  9        0      I: dense_11_dense_output       (1,1,1,9) (16)   
                                                                   O: dense_11_output             (1,1,1,9) (0)    
--------------------------------------------------------------------------------------------------------------------
4      dense_12_dense     9    dense               30       120    I: dense_11_output             (1,1,1,9) (0)    
                                                                   W: dense_12_dense_weights      (9,1,1,3) (5)    
                                                                   W: dense_12_dense_bias         (1,1,1,3) (6)    
                                                                   O: dense_12_dense_output       (1,1,1,3) (2)    
--------------------------------------------------------------------------------------------------------------------
5      dense_12           9    nl                  45       0      I: dense_12_dense_output       (1,1,1,3) (2)    
                                                                   O: dense_12_output             (1,1,1,3) (3)    
--------------------------------------------------------------------------------------------------------------------



Number of operations per c-layer
--------------------------------------------------------------------------------------------------------------
c_id    m_id   name (type)                           #op (type)                       #param (sparsity)      
--------------------------------------------------------------------------------------------------------------
0       1      conv2d_11_conv2d (optimized_conv2d)           147,856 (smul_f32_f32)              160 (0.0000)
1       4      conv2d_12_conv2d (optimized_conv2d)           364,240 (smul_f32_f32)            2,320 (0.0000)
2       7      dense_11_dense (dense)                          5,193 (smul_f32_c4)             5,193 (0.0006)
3       7      dense_11 (nl)                                       9 (op_f32_f32)                            
4       9      dense_12_dense (dense)                             30 (smul_f32_f32)               30 (0.0000)
5       9      dense_12 (nl)                                      45 (op_f32_f32)                            
--------------------------------------------------------------------------------------------------------------
total                                                        517,373                           7,703 (0.0004)

  Number of operation types
  ---------------------------------------------
  smul_f32_f32             512,126       99.0%
  smul_f32_c4                5,193        1.0%
  op_f32_f32                    54        0.0%

Complexity report (model)
-------------------------------------------------------------------------------------
m_id   name               c_macc                    c_rom                     c_id  
-------------------------------------------------------------------------------------
1      max_pooling2d_11   |||||||           28.6%   ||                 5.0%   [0]   
4      max_pooling2d_12   ||||||||||||||||  70.4%   ||||||||||||||||  72.9%   [1]   
7      dense_11_dense     |                  1.0%   |||||             21.1%   [2, 3]
9      dense_12_dense     |                  0.0%   |                  0.9%   [4, 5]
-------------------------------------------------------------------------------------
macc=517,373 weights=12,732 act=19,328 ram_io=0

Generated files (7)
----------------------------------------------------------------
/home/felipe/.stm32cubemx/asc_output/asc_config.h
/home/felipe/.stm32cubemx/asc_output/asc.h
/home/felipe/.stm32cubemx/asc_output/asc.c
/home/felipe/.stm32cubemx/asc_output/asc_data_params.h
/home/felipe/.stm32cubemx/asc_output/asc_data_params.c
/home/felipe/.stm32cubemx/asc_output/asc_data.h
/home/felipe/.stm32cubemx/asc_output/asc_data.c
